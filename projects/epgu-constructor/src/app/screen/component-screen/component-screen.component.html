<epgu-constructor-screen-container>
  <div class="screen-body">
    <div *ngIf="screenService.header$ | async as header" class="head">
      <epgu-constructor-page-name>{{ header }}</epgu-constructor-page-name>
    </div>

    <epgu-constructor-screen-pad class="body">
      <ng-container [ngSwitch]="screenService.componentType$ | async">
        <epgu-constructor-confirm-personal-user-address
          *ngSwitchCase="screenComponentName.confirmPersonalUserRegAddr"
        ></epgu-constructor-confirm-personal-user-address>

        <epgu-constructor-confirm-personal-user-data
          *ngSwitchCase="isUserData()"
        ></epgu-constructor-confirm-personal-user-data>

        <epgu-constructor-confirm-personal-user-phone-email
          *ngSwitchCase="isUserContactData()"
        ></epgu-constructor-confirm-personal-user-phone-email>

        <epgu-constructor-registration-addr
          *ngSwitchCase="screenComponentName.registrationAddr"
        ></epgu-constructor-registration-addr>

        <epgu-constructor-add-passport
          *ngSwitchCase="screenComponentName.passportLookup"
        ></epgu-constructor-add-passport>

        <epgu-constructor-country-selection
          *ngSwitchCase="screenComponentName.countryApostil"
          (changeComponentSettings)="changeComponentSettings($event)"
          (changeComponentData)="changedComponentData($event)"
        ></epgu-constructor-country-selection>

        <epgu-constructor-select-children-screen
          *ngSwitchCase="screenComponentName.childrenList"
          (nextStepEvent)="nextStep()"
        ></epgu-constructor-select-children-screen>
        <!-- TODO: удалить потом как depricated -->
        <epgu-constructor-select-children-screen
          *ngSwitchCase="screenComponentName.childrenListUnder14"
          (nextStepEvent)="nextStep()"
        ></epgu-constructor-select-children-screen>
        <!-- TODO: удалить потом как depricated -->
        <epgu-constructor-select-children-screen
          *ngSwitchCase="screenComponentName.childrenListAbove14"
          (nextStepEvent)="nextStep()"
        ></epgu-constructor-select-children-screen>

        <epgu-constructor-field-list
          [data]="screenService.component"
          *ngSwitchCase="screenComponentName.fieldList"
        >
        </epgu-constructor-field-list>
        <epgu-constructor-timer
          *ngSwitchCase="screenComponentName.timer"
          [data]="$any(screenService.component)"
          (nextStepEvent)="nextStep($event)"
        >
        </epgu-constructor-timer>
      </ng-container>
    </epgu-constructor-screen-pad>
  </div>

  <div class="screen-footer">
    <ng-container *ngIf="isShowActionBtn">
      <ng-container *ngTemplateOutlet="componentActionBtns"></ng-container>
    </ng-container>

    <ng-container *ngIf="screenActionButtons.length">
      <ng-container *ngTemplateOutlet="screenActionBtns"></ng-container>
    </ng-container>

    <ng-container *ngIf="componentSetting.displayContinueBtn">
      <ng-container *ngTemplateOutlet="displayContinueBtn"></ng-container>
    </ng-container>

    <div *ngIf="componentSetting.displayWarningAnswers" class="footer__warning-answers">
      <ng-container *ngTemplateOutlet="displayWarningAnswersBtn"></ng-container>
    </div>
  </div>
</epgu-constructor-screen-container>

<ng-template #componentActionBtns>
  <lib-button
    *ngFor="let action of actionButtons"
    epgu-constructor-action
    [action]="action"
    [color]="action.color"
  >
    <div>{{ action.label }}</div>
  </lib-button>
</ng-template>

<ng-template #screenActionBtns>
  <lib-button
    *ngFor="let action of screenActionButtons"
    epgu-constructor-action
    [action]="action"
    [color]="action.color"
  >
    <div>{{ action.label }}</div>
  </lib-button>
</ng-template>

<ng-template #displayContinueBtn>
  <lib-button
    *ngIf="screenService.submitLabel$ | async"
    [showLoader]="screenService.isLoading$ | async"
    (click)="nextStep()"
    data-testid="display-continue-btn"
    class="btn__submit"
    [disabled]="!currentAnswersService.isValid || (screenService.isLoading$ | async)"
  >
    <div class="secondary-font">
      {{ (screenService.submitLabel$ | async) || 'Продолжить' }}
    </div>
  </lib-button>
</ng-template>

<ng-template #displayWarningAnswersBtn>
  <epgu-constructor-answer-button (click)="nextStep()" [data]="{ label: 'Всё равно продолжить' }">
  </epgu-constructor-answer-button>
  <epgu-constructor-answer-button
    class="footer__answer-btn"
    (click)="goToHomePage()"
    [data]="{ label: 'Вернуться в личный кабинет' }"
  >
  </epgu-constructor-answer-button>
</ng-template>
