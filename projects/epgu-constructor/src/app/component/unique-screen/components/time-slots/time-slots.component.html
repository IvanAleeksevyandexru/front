<epgu-constructor-screen-container *ngIf="(data$ | async) as data"
                                   [show-nav]="screenService.showNav$ | async"
                                   [class.screen-container-mt]="!(screenService.showNav$ | async)"
>

  <div class="screen-body">
    <epgu-constructor-page-name *ngIf="data?.header">{{ data.header }}</epgu-constructor-page-name>

    <epgu-constructor-screen-pad>
      <div class="card">
        <div *ngIf="isAreasVisible" class="dropdown-list">
          <lib-dropdown
            [items]="areas"
            [(ngModel)]="currentArea"
            (changed)="areaChanged()"
          ></lib-dropdown>
        </div>
        <div class="dropdown-list">
          <lib-dropdown
            [disabled]="fixedMonth"
            [items]="monthsYears"
            [(ngModel)]="currentMonth"
            (changed)="monthChanged($event)"
            class="compact-selector"
            contextClass="compact"></lib-dropdown>
        </div>
        <div class="calendar-table">
          <div class="calendar-grip-container-wrapper">
            <div class="calendar-grid-container">
              <div class="calendar-grid-wrap current-month">
                <div class="calendar-grid">
                  <div class="calendar-week-days">
                    <div class="calendar-week-day" *ngFor="let weekDay of daysOfWeek">
                      <span class="calendar-week-day-text">{{weekDay}}</span>
                    </div>
                  </div>
                  <div class="calendar-week" *ngFor="let week of weeks">
                    <div *ngFor="let day of week" class="calendar-day" (click)="selectDate(day.date)" [ngClass]="{
                    'today': isToday(day.date),
                    'locked': isDateLocked(day.date),
                    'selected': isSelected(day.date),
                    'outer': isDateOutOfMonth(day.date)
                  }">
                      <span class="calendar-day-text">{{day ? day.number : ''}}</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="divider"></div>
        <div class="time-slots-items">
          <div *ngFor="let slot of timeSlots" class="time-slot-item"
               [ngClass]="{'selected': isSlotSelected(slot)}"
               (click)="chooseTimeSlot(slot)">
            {{slot.slotTime | date:'shortTime'}}
          </div>
        </div>

        <div class="time-slots-empty" *ngIf="!isExistsSlots">
          <h4>В этом месяце всё занято</h4>
          <epgu-constructor-helper-text size="lg">
            Выберите другой месяц или подразделение, чтобы забронировать время
          </epgu-constructor-helper-text>
        </div>
      </div>
    </epgu-constructor-screen-pad>
  </div>
  <div class="screen-footer">
    <div class="screen-footer--time-slots">
      <span *ngIf="isChosenTimeStrVisible" class="time">
        Вы забронировали:
        <span class="time--bold">
          {{chosenTimeStr}}
        </span>
      </span>
      <lib-button
        [showLoader]="(isLoading$ | async) || inProgress"
        (click)="clickSubmit()"
        class="submit-button"
        [disabled]="buttonDisabled()"
        *ngIf="screenService.button$ | async as button"
      >
        <div class="secondary-font">{{ button?.label || 'Продолжить' }}</div>
      </lib-button>
    </div>
  </div>
</epgu-constructor-screen-container>
