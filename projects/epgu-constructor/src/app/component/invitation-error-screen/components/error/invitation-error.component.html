<epgu-constructor-screen-container class="invitation">
  <epgu-constructor-screen-pad class="screen-body">
    <div *ngIf="!emailSent; else result">
      <div class="invitation__img-wrapper">
        <img src="{{ data.attrs.imgSrc }}" alt="" />
      </div>

      <epgu-constructor-page-name class="invitation__head">{{ header }}</epgu-constructor-page-name>

      <epgu-constructor-output-html
        class="invitation__label"
        [html]="data.label"
      ></epgu-constructor-output-html>

      <form class="form">
        <div class="form__item">
          <epgu-constructor-label [label]="data.attrs.label"></epgu-constructor-label>

          <div class="form__error">
            <small *ngIf="email.invalid && email.touched">
              {{ email.getError('msg') }}
            </small>
          </div>

          <epgu-constructor-constructor-plain-input
            id="email"
            type="email"
            placeholder="Email"
            [control]="email"
            [invalid]="email.invalid && email.touched"
            [validationShowOn]="validationShowOn"
          ></epgu-constructor-constructor-plain-input>

          <epgu-constructor-helper-text>{{ data.attrs.helperText }}</epgu-constructor-helper-text>
        </div>
      </form>
    </div>
    <div class="invitation__footer">
      <lib-button *ngIf="!emailSent" (click)="sendEmail()" [disabled]="!email.valid">{{
        data.attrs.sendEmailLabel
      }}</lib-button>
      <lib-button *ngIf="emailSent" (click)="redirectToLK()">
        {{ data.attrs.redirectLabel }}
      </lib-button>
    </div>
  </epgu-constructor-screen-pad>

  <ng-template #result>
    <div *ngIf="success; else errorMessage">
      <div class="invitation__img-wrapper">
        <img src="{{ data.attrs.success.imgSrc }}" alt="" />
      </div>
      <epgu-constructor-output-html [html]="data.attrs.success.label">
      </epgu-constructor-output-html>
    </div>
    <ng-template #errorMessage>
      <div class="info">
        <div class="invitation__img-wrapper">
          <img class="info__img" src="{{ data.attrs.error.imgSrc }}" alt="" />
        </div>
        <epgu-constructor-output-html [html]="data.attrs.error.label">
        </epgu-constructor-output-html>
      </div>
    </ng-template>
  </ng-template>
</epgu-constructor-screen-container>
