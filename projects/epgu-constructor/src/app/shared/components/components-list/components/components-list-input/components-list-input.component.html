<ng-container
  *ngTemplateOutlet="
      control.value?.attrs?.mask ? maskedInput : plainInput;
      context: { $implicit: control.value  }
    "
>
</ng-container>

<ng-template #plainInput let-component>
  <epgu-constructor-constructor-plain-input
    [price]="component?.attrs?.price"
    [rank]="component?.attrs?.rank"
    [textTransformType]="component?.attrs?.fstuc"
    [invalid]="control.get('value').invalid && control.get('value').touched"
    [name]="component?.id"
    [control]="$any(control.get('value'))"
    [validationShowOn]="validationShowOn"
    [readOnly]="component?.attrs?.readonly"
    [placeholder]="component?.attrs?.placeholder"
    [component]="component"
    [suggestions]="suggestions"
    (selectSuggest)="selectSuggest.emit($event)"
  ></epgu-constructor-constructor-plain-input>
</ng-template>

<ng-template #maskedInput let-component>
  <epgu-constructor-masked-input
    *ngIf="component?.attrs?.mask"
    [validationShowOn]="validationShowOn"
    [readonly]="component?.attrs?.readonly"
    [mask]="component?.attrs?.mask"
    [maskOptions]="$any(component?.attrs?.maskOptions)"
    [textTransformType]="component?.attrs?.fstuc"
    [clearable]="true"
    [name]="component?.id"
    [showMaskAsPlaceholder]="!component?.attrs?.placeholder"
    [showConstantMaskSymbols]="component?.attrs?.showMaskSymbols"
    [placeholder]="component?.attrs?.placeholder"
    [control]="$any(control.get('value'))"
    [invalid]="control.get('value').invalid && control.get('value').touched"
    [isTrim]="false"
    [component]="component"
    [showPlaceholderOnFocus]="component?.attrs?.showPlaceholderOnFocus"
    [suggestions]="suggestions"
    (selectSuggest)="selectSuggest.emit($event)"
  ></epgu-constructor-masked-input>
</ng-template>
