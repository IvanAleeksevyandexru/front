<app-screen-container>
  <div class="inner">
    <div *ngIf="data?.header" class="head">
      <app-page-name>{{ data.header }}</app-page-name>
    </div>

    <app-screen-pad class="body">
      <div class="card">
        <label>Выберите дату и время</label>
        <div class="months-list">
          <lib-dropdown
            [disabled]="fixedMonth"
            [items]="monthsYears"
            [(ngModel)]="currentMonth"
            (changed)="monthChanged($event)"
            class="compact-selector"
            contextClass="compact"></lib-dropdown>
        </div>
        <div class="calendar-table">
          <div class="calendar-grip-container-wrapper">
            <div class="calendar-grid-container">
              <div class="calendar-grid-wrap current-month">
                <div class="calendar-grid">
                  <div class="calendar-week-days">
                    <div class="calendar-week-day" *ngFor="let weekDay of daysOfWeek">
                      <span class="calendar-week-day-text">{{weekDay}}</span>
                    </div>
                  </div>
                  <div class="calendar-week" *ngFor="let week of weeks">
                    <div *ngFor="let day of week" class="calendar-day" (click)="selectDate(day.date)" [ngClass]="{
                    'today': isToday(day.date),
                    'locked': isDateLocked(day.date),
                    'holiday': isHoliday(day.date),
                    'selected': isSelected(day.date),
                    'outer': isDateOutOfMonth(day.date)
                  }">
                      <span class="calendar-day-text">{{day ? day.number : ''}}</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <hr class="divider">
        <div class="time-slots-items">
          <div *ngFor="let slot of timeSlots" class="time-slot-item"
               [ngClass]="{'selected': isSlotSelected(slot)}"
               (click)="chooseTimeSlot(slot)">
            {{slot.slotTime | date:'shortTime'}}
          </div>
        </div>
      </div>
    </app-screen-pad>

    <div class="footer">
      <lib-button
        [showLoader]="constructorService.isLoading || bookingProgress"
        (click)="bookTimeSlot()"
        class="footer__btn-submit"
        [disabled]="!screenComponentService.isValid || bookingProgress"
      >
        <div class="secondary-font">{{ data?.submitLabel || 'Продолжить' }}</div>
      </lib-button>
    </div>
  </div>
</app-screen-container>
