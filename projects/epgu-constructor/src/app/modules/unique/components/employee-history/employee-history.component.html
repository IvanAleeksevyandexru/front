<epgu-constructor-navigation class="nav"></epgu-constructor-navigation>
<epgu-constructor-screen-container>
  <div *ngIf="header" class="head">
    <epgu-constructor-page-name>{{ header }}</epgu-constructor-page-name>
  </div>
  <section class="employee-history__addedGenerations"
    *ngFor="let generation of employeeFormService.employeeHistory; let i = index">
    <div class="employee-history__type">
      <div>
        <lib-radio *ngFor="let role of ds"
                   [name]="i + '_typeGenerated'"
                   [disabled]="true"
                   [checked]="generation.type === role.value"
                   [labelText]="role.label"
                   [value]="role.value"
        ></lib-radio>
      </div>
      <div class="employee-history__removeGeneration">
        <button class="button-close" (click)="removeFormGroup(i)">
          <div class="icon-close"></div>
        </button>
      </div>
    </div>
    <div class="employee-history__date">
      <div>
        <epgu-constructor-label [for]="i + '_fromGenerated'">Укажите дату (месяц, год)</epgu-constructor-label>
        <lib-date-picker
          [id]="i + '_fromGenerated'"
          [disabled]="true"
          [(ngModel)]="generation.from"
        ></lib-date-picker>
      </div>

      <div>
        <epgu-constructor-label [for]="i + '_toGenerated'">Укажите дату (месяц, год)</epgu-constructor-label>
        <lib-date-picker
          [id]="i + '_toGenerated'"
          [disabled]="true"
          [(ngModel)]="generation.to"
        ></lib-date-picker>
      </div>
    </div>
    <div class="employee-history__input" *ngIf="ds[generation.type]?.position as position">
      <epgu-constructor-label [for]="i + '_position'">{{ position }}</epgu-constructor-label>
      <lib-plain-input
        [id]="i + '_position'"
        [disabled]="true"
        [(ngModel)]="generation.position"
      ></lib-plain-input>
    </div>
    <div class="employee-history__input" *ngIf="ds[generation.type]?.place as place">
      <epgu-constructor-label [for]="i + '_place'">{{ place }}</epgu-constructor-label>
      <lib-plain-input
        [id]="i + '_place'"
        [disabled]="true"
        [(ngModel)]="generation.place"
      ></lib-plain-input>
    </div>
    <div class="employee-history__input">
      <epgu-constructor-label [for]="i + '_address'">Адрес полностью, включая регион и город</epgu-constructor-label>
      <lib-plain-input
        [id]="i + '_address'"
        [disabled]="true"
        [(ngModel)]="generation.address"
      ></lib-plain-input>
    </div>
  </section>
  <section class="employee-history__generation">
    <div class="employee-history__type">
      <div>
        <lib-radio *ngFor="let role of ds"
          name="generationType"
          [formControl]="generateForm.get('type')"
          [labelText]="role.label"
          [value]="role.value"
          (change)="resetForm(role.value)"
        ></lib-radio>
      </div>
    </div>
    <div class="employee-history__date">
      <div>
        <epgu-constructor-label for="from">Укажите дату с (месяц, год)</epgu-constructor-label>
        <lib-date-picker
          id="from"
          [formControl]="generateForm.get('from')"
        ></lib-date-picker>
        <div class="employee-history__date__hint">Заполняется при наличии</div>
      </div>

      <div>
        <ng-container *ngIf="!generateForm.get('checkboxToDate').value">
          <epgu-constructor-label for="to">Укажите дату по (месяц, год)</epgu-constructor-label>
          <lib-date-picker
            id="to"
            [formControl]="generateForm.get('to')"
          ></lib-date-picker>
          <div class="employee-history__date__hint">Заполняется при наличии</div>
        </ng-container>
      </div>
    </div>
    <div class="employee-history__input">
      <lib-checkbox
        [formControl]="generateForm.get('checkboxToDate')"
        labelText="По настоящее время"
      ></lib-checkbox>
    </div>
    <div class="employee-history__input" *ngIf="ds[generateForm.get('type').value]?.position as position">
      <epgu-constructor-label for="position">{{ position }}</epgu-constructor-label>
      <lib-plain-input
        id="position"
        [formControl]="generateForm.get('position')"
      ></lib-plain-input>
    </div>
    <div class="employee-history__input" *ngIf="ds[generateForm.get('type').value]?.place as place">
      <epgu-constructor-label for="place">{{ place }}</epgu-constructor-label>
      <lib-plain-input
        id="place"
        [formControl]="generateForm.get('place')"
      ></lib-plain-input>
    </div>
    <div class="employee-history__input">
      <epgu-constructor-label for="address">Адрес полностью, включая регион и город</epgu-constructor-label>
      <lib-plain-input
        id="address"
        [formControl]="generateForm.get('address')"
      ></lib-plain-input>
    </div>

    <div class="employee-history__pushGeneration">
      <button class="btn btn--light employee-history__pushGeneration__button"
              (click)="pushFormGroup()"
      >Добавить данные</button>
    </div>
  </section>
</epgu-constructor-screen-container>
