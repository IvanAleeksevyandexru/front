<div class="fileupload__wrapper">
  <div class="fileupload__label" *ngIf="data?.label.length"
       [innerHTML]="data.label"></div>
  <div class="fileupload__label" *ngIf="refData?.length"
       [innerHTML]="refData"></div>
  <input #fileUploadInput type="file" [attr.accept]="getAcceptTypes()" (change)="updateSelectedFilesInfoAndSend()" multiple/>
  <div class="errors" *ngIf="errors.length">
    <div class="error" *ngFor="let error of errors" [innerText]="error"></div>
  </div>
  <div class="files" *ngIf="(files$$ | async) as files">
    <div class="file" *ngFor="let file of files">
      <div class="file__icon"
           [class.uploaded]="file.uploaded"
           [class.has-error]="file.hasError"></div>
      <div class="file__title-wrapper">
        <div class="file__title uploaded" *ngIf="file.uploaded"
             [innerText]="file.fileName"
             (click)="downloadFile(file)">
        </div>
        <div class="file__title" *ngIf="!file.uploaded"
             [class.has-error]="file.hasError"
             [innerText]="file.hasError ? 'Ошибка загрузки' : 'Файл загружается'">
        </div>
        <div class="file__title-info" *ngIf="file.uploaded">
          Файл загружен ({{file.getFileSize()}})
        </div>
      </div>
      <button class="file__action" (click)="deleteFile(file)">
        Удалить
      </button>
    </div>
  </div>
  <div class="fileupload__buttons" [class.nocamera]="cameraNotAllowed" >
    <button *ngIf="!cameraNotAllowed" class="fileupload__button"
      (click)="openCamera()"
      [disabled]="(listIsUploadingNow || filesInUploading > 0)">
      <img src="/assets/icons/svg/camera.svg" class="fileupload__button-icon"/>
      Фото
    </button>
    <button class="fileupload__button"
      (click)="selectFilesEvent()"
      [disabled]="(listIsUploadingNow || filesInUploading > 0)">
      <img src="/assets/icons/svg/clip.svg" class="fileupload__button-icon"/>
      Файл
    </button>
  </div>
  <webcam class="webcam__video" (initError)="handleCameraInitError($event)"></webcam>
</div>
