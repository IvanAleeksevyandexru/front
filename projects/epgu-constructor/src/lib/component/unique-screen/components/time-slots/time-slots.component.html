<epgu-cf-ui-screen-container
  *ngIf="data$ | async as data"
  [show-nav]="screenService.showNav$ | async"
  [class.screen-container-mt]="!(screenService.showNav$ | async)"
>
  <div class="screen-body">
    <epgu-constructor-page-name *ngIf="data?.header">{{ data.header }}</epgu-constructor-page-name>

    <epgu-cf-ui-constructor-screen-pad>
      <div>
        <div *ngIf="isAreasVisible" class="dropdown-list">
          <lib-dropdown
            [items]="areas"
            [(ngModel)]="currentArea"
            (changed)="areaChanged()"
          ></lib-dropdown>
        </div>
        <div *ngIf="isMonthsRangeVisible" class="months-range">
          {{ monthsRange }}
        </div>
        <div *ngIf="!isMonthsRangeVisible" class="dropdown-list">
          <lib-dropdown
            [disabled]="fixedMonth"
            [items]="monthsYears"
            [(ngModel)]="currentMonth"
            (changed)="monthChanged($event)"
            class="compact-selector"
            contextClass="compact"
          ></lib-dropdown>
        </div>

        <epgu-cf-ui-constructor-time-calendar
          [daysNotFoundTemplate]="{
            'header': 'В этом месяце всё занято',
            'description': 'Выберите другой месяц или подразделение, чтобы забронировать время'
          }"
          [weeks]="weeks"
          [currentSlot]="currentSlot"
          [isExistsSlots]="isExistsSlots"
          [slotList]="timeSlots"
          (chooseTimeSlot)="chooseTimeSlot($event)"
          (selectDate)="selectDate($event)"
        ></epgu-cf-ui-constructor-time-calendar>
      </div>
    </epgu-cf-ui-constructor-screen-pad>
  </div>
  <div class="screen-footer">
    <div class="screen-footer--time-slots">
      <span *ngIf="isChosenTimeStrVisible" class="time">
        Вы забронировали:
        <span class="time--bold">
          {{ chosenTimeStr }}
        </span>
      </span>
      <lib-button
        [showLoader]="(isLoading$ | async) || inProgress"
        (click)="clickSubmit()"
        class="submit-button"
        [disabled]="buttonDisabled()"
        *ngIf="screenService.button$ | async as button"
      >
        <div class="secondary-font">{{ button?.label || 'Продолжить' }}</div>
      </lib-button>
    </div>
  </div>
</epgu-cf-ui-screen-container>
