<div class="map-search-panel">
  <div class="map-search-panel__nav">
    <epgu-cf-ui-prev-button
      class="map-search-panel__nav__prev-button"
      *ngIf="screenService.showNav$ | async"
    ></epgu-cf-ui-prev-button>
    <div *ngIf="!deviceDetector.isDesktop" class="map-search-panel__nav__toolbar">
      <button
        class="icon map"
        [ngClass]="{ active: selectMapObjectService.isMapViewType }"
        (click)="selectMapObjectService.setViewType(viewTypes.Map)"
      ></button>
      <button
        class="icon list"
        [ngClass]="{ active: selectMapObjectService.isListViewType }"
        (click)="selectMapObjectService.setViewType(viewTypes.List)"
      ></button>
    </div>
  </div>

  <ng-container *ngTemplateOutlet="errorRegion"></ng-container>
  <span
    *ngIf="label && isSearchTitleVisible && !isNoDepartmentErrorVisible"
    class="map-search-panel__title"
    [innerHTML]="label | safe: 'html'"
  ></span>
  <ng-template #panel></ng-template>
  <ng-container *ngTemplateOutlet="disclaimerTemplate"></ng-container>
</div>

<ng-template #errorRegion>
  <div *ngIf="isNoDepartmentErrorVisible" class="error-region">
    <ng-container *ngIf="!noDepartmentsErrorMsg">
      <h6 class="red-line">Нет доступных подразделений</h6>
      <span class="hint-text">Для подачи документов выберите подразделение в другом регионе </span>
    </ng-container>
    <epgu-constructor-output-html
      *ngIf="noDepartmentsErrorMsg"
      [html]="noDepartmentsErrorMsg"
    ></epgu-constructor-output-html>
  </div>
</ng-template>

<ng-template #disclaimerTemplate>
  <epgu-constructor-disclaimer
    *ngIf="disclaimer"
    class="mt-8 map-search-panel__disclaimer"
    [type]="disclaimer.type"
    [title]="disclaimer.title"
    [description]="disclaimer.description"
  ></epgu-constructor-disclaimer>
</ng-template>
