<epgu-constructor-search-panel-resolver
  [panelType]="searchPanelType"
  [label]="sidebarData.label"
  [disclaimer]="sidebarData.attrs.disclaimer"
  [showNav]="screenService.showNav$ | async"
  [noDepartmentsErrorMsg]="sidebarData.attrs.noDepartmentsErrorMsg"
  [isNoDepartmentErrorVisible]="selectMapObjectService.isNoDepartmentErrorVisible | async"
  (handleFiltering)="handleFiltering($event)"
></epgu-constructor-search-panel-resolver>

  <div class="previously-choosen" [ngClass]="{ hidden: selectMapObjectService.isMapViewType }" *ngIf="previouslyChoosenItem">
    <p class="previously-choosen__title">
      Вы ранее выбрали
    </p>
    <epgu-constructor-balloon-content-resolver
      [contentType]="balloonContentType"
      [mapObject]="previouslyChoosenItem"
      [isSelectButtonHidden]="sidebarData.attrs.isSelectButtonHidden"
      [attrs]="sidebarData.attrs.balloonAttrs"
      (selectObject)="selectObject($event)"
      (handleObjectClickEvent)="handlePreviouslyChoosenClick($event)"
      (collapseObjectEvent)="collapseObject($event)" >
    </epgu-constructor-balloon-content-resolver>
  </div>
  <div
    *ngIf="
      originalValue.length
      && (sidebarData.attrs.mapType === MapTypes.justiceMap || sidebarData.attrs.mapType === MapTypes.electionsMap)"
    class="cross-btn"
    (click)="collapseObject(activeItem)"
  >
  </div>
  <perfect-scrollbar [config]="scrollConfig" class="perfect-scrollbar" [ngClass]="{ hidden: selectMapObjectService.isMapViewType }">
    <ng-container *ngIf="balloonDictionaryItems.length">
      <ng-container *ngFor="let mapObject of balloonDictionaryItems">
      <epgu-constructor-balloon-content-resolver
        #balloonComponents
        [contentType]="balloonContentType"
        [mapObject]="mapObject"
        [isSelectButtonHidden]="sidebarData.attrs.isSelectButtonHidden"
        [attrs]="sidebarData.attrs.balloonAttrs"
        (selectObject)="selectObject($event)"
        (handleObjectClickEvent)="handleMapObjectClick(mapObject)"
        (collapseObjectEvent)="collapseObject(mapObject)" >
      </epgu-constructor-balloon-content-resolver>
     </ng-container>
    </ng-container>
    <ng-container *ngIf="!balloonDictionaryItems.length &&
    (!sidebarData.attrs.mapType || sidebarData.attrs.mapType === 'commonMap' || sidebarData.attrs.mapType === 'kindergartenMap')">
      <p class="not-found-text">
        {{ sidebarData.attrs.notFoundItemsMessage || 'По вашему запросу ничего не найдено' }}
      </p>
    </ng-container>
    <ng-container
      *ngIf="originalValue.length
      && (sidebarData.attrs.mapType === MapTypes.justiceMap || sidebarData.attrs.mapType === MapTypes.electionsMap)"
    >
      <ng-container *ngFor="let mapObject of originalValue">
        <epgu-constructor-balloon-content-resolver
          [contentType]="balloonContentType"
          [mapObject]="mapObject"
          [isSelectButtonHidden]="sidebarData.attrs.isSelectButtonHidden"
          [attrs]="sidebarData.attrs.balloonAttrs"
          (selectObject)="selectObject($event)"
          (handleObjectClickEvent)="handleMapObjectClick(activeItem)"
          (collapseObjectEvent)="collapseObject(activeItem)"
        >
        </epgu-constructor-balloon-content-resolver>
      </ng-container>
    </ng-container>
  </perfect-scrollbar>

<epgu-constructor-swipeable-wrapper *ngIf="activeItem && selectMapObjectService.isMapViewType" class="swipeable-mode">
  <div
    *ngIf="originalValue.length && (sidebarData.attrs.mapType === 'justiceMap' || sidebarData.attrs.mapType === 'electionsMap')"
    class="cross-btn"
    (click)="collapseObject(activeItem)"
  >
  </div>
  <perfect-scrollbar [config]="scrollConfig" class="perfect-scrollbar">
    <ng-container *ngFor="let mapObject of originalValue">
      <epgu-constructor-balloon-content-resolver
        [contentType]="balloonContentType"
        [mapObject]="mapObject"
        [isSelectButtonHidden]="sidebarData.attrs.isSelectButtonHidden"
        [attrs]="sidebarData.attrs.balloonAttrs"
        (selectObject)="selectObject($event)"
        (collapseObjectEvent)="activeItem = null"
      >
      </epgu-constructor-balloon-content-resolver>
    </ng-container>
  </perfect-scrollbar>
</epgu-constructor-swipeable-wrapper>
